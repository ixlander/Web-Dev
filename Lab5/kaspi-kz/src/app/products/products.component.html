<div class="products-container">
  <div class="product-card" *ngFor="let product of products">
    <div class="product-gallery">
      <div class="main-image-container">
        <button class="nav-button prev" (click)="previousImage(product)" *ngIf="product.images.length > 1">❮</button>
        <img [src]="product.currentImage || product.images[0]" 
             [alt]="product.name" 
             class="main-image"
             (click)="openGallery(product)">
        <button class="nav-button next" (click)="nextImage(product)" *ngIf="product.images.length > 1">❯</button>
      </div>
      
      <div class="thumbnail-container">
        <img *ngFor="let img of product.images; let i = index" 
             [src]="img" 
             class="thumbnail" 
             [class.active]="img === (product.currentImage || product.images[0])"
             (click)="setMainImage(product, img, i)"
             [alt]="product.name + ' thumbnail ' + (i + 1)">
      </div>
      
      <div class="image-counter" *ngIf="product.images.length > 1">
        {{ getCurrentImageIndex(product) + 1 }}/{{ product.images.length }}
      </div>
    </div>

    <div class="product-info">
      <h3>{{ product.name }}</h3>
      <p class="description">{{ product.description }}</p>
      <div class="price">{{ product.price }}</div>
      <div class="rating">
        <span>Rating:</span>
        <span>{{ '⭐'.repeat(product.rating) }}</span>
      </div>
      <a [href]="product.link" target="_blank" class="product-link">View on Kaspi.kz</a>
      <div class="share-buttons">
        <button (click)="share(product.link, 'telegram')" class="share-button telegram-button">
          Share on Telegram
        </button>
        <button (click)="share(product.link, 'whatsapp')" class="share-button whatsapp-button">
          Share on WhatsApp
        </button>
      </div>
    </div>
  </div>
</div>